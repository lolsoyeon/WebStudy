<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AjaxTest01.html</title>
<script type="text/javascript">
	
	function loadXMLDocs()
	{
// 		alert("함수 호출 확인");
	
		// 변수 선언 → XMLHttpRequest 객체를 담을 변수 → AJAX 객체
		var xmlHttp;
		
		// (클라이언트측) 브라우저에 따른 분기
		// (클라이언트 측에서 )자신의 브라우저가 XMLHttpRequest 객체를 
		// 지원하고 있는 상황 이라면....
		if (window.XMLHttpRequest)
		{
			// 이와같은 방식으로 객체를 생성하고
			xmlHttp = new XMLHttpRequest();
// 			alert("XMLHttpRequest 지원!~!~!");
		}
		// (클라이언트 측에서 )자신의 브라우저가 XMLHttpRequest 객체를 
		// 지원하지 않는 상황 이라면....
		else
		{
			// 이와 같은 방식으로 객체를 생성해라
			xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
// 			alert("XMLHttpRequest 지원 안함~!~!");
		}
		
		// 브라우저마다 객체를 생성하는 방법의 차이만 있을 뿐
		// XMLHttpRequest 객체를 생성하게 된다는 사실에는 변함이 없다.
		// 즉, 여기까지 수행하면 XMLHttpRequset 객체 생성 완료~!
		
		
		
		// 『xmlHttp』 : XMLHttpRequest 객체
		// 서버로부터 응답이 오면 『readystatechage』 라는 이벤트가 발생하게 된다.
		// 즉, 『onreadystatechage』 는 『readystatechage』이벤트가 발생했을때...
		// 동작할 수 있도록 이벤트 핸들러를 등록하는 과정.
		// 총의 방아쇠 , 지뢰(다른 누군가의 액션이 있을때 발생 == 콜백 함수)		
		xmlHttp.onreadystatechange = function()
		{
			// alert("이벤트 발생~!!");
			
			// 서버로부터 응답이 올 때 마다
			// readyState 는 그 상황에서의 XMLHttpRequest 객체의 상태를 저장하게 된다.
			// 즉, readyState 는 XMLHttpReqest 객체의 property 이다.
			// readystatechage 이벤트는
			// readyState 가 변경될 때마다 발생한다.
			
			// ※ 『XMLHttpRequest』 의 『readtState』(프로퍼티 이름임)
			// 0 에서 4 까지 순차적으로 변화한다.
			alert(xmlHttp.readyState);
			
			
			
			if (xmlHttp.readyState==4 && xmlHttp.status==200)
			{
				document.getElementById("myDiv").innerHTML = xmlHttp.responseText;
			}
			
			
		}
		
		xmlHttp.open("GET", "ajaxTarget.txt", true);
		xmlHttp.send("");
		
		
	}

</script>
</head>
<body>

<div id="myDiv">
	<h1>AJAX 를 활용하여 이 텍스트의 내용을 변경</h1>
</div>
<br><br>

<button type="button" onclick="loadXMLDocs()">Content 바꾸기</button>


</body>
</html>